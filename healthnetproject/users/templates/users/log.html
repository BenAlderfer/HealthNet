{% extends 'healthnet/base.html' %}
{% block title %}
    <title>{{hospital.name}} Event Log</title>
{% endblock %}
{% block other_imports %}
    {% load staticfiles %}
    <link rel='stylesheet' href="{% static 'healthnet/css/bootstrap-datetimepicker.min.css' %}"/>
{% endblock %}
{% block nav %}
    {% include "healthnet/user_nav.html" %}
{% endblock %}
{% block content %}
    <div class="card">
        <legend><h1>
            System Events for {{hospital.name}}
        </h1></legend>

        <form action="" enctype="multipart/form-data" method="post" id="datefilter">{% csrf_token %}
            <section class="row">
                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12">
                    <label for="startdate">From:</label>
                    <input type="text" id="startdate" name="startdate" placeholder="mm-dd-yyyy" class="margin-right" required>
                    <label for="enddate">To:</label>
                    <input type="text" id="enddate" name="enddate" placeholder="mm-dd-yyyy" required>
                    <input type="submit" id="submit" value="Filter" class="btn btn-primary margin-left">
                </div>
            </section>
        </form>

        <ul style="list-style: none" class="alternating-list pad-children">
            {% for item in log %}
                <li>
                    <span>
                        Event: {{item.description}} <br/>
                        Generated By: {{item.generatedby}} at {{item.time}}
                    </span>
                </li>
            {% endfor %}
        </ul>

        <div class="margin-top">
            {% if not first %}
            <input type="button" value="Previous" class="btn btn-primary margin-right"
                        onclick="location.href='/users/log/{{ pk }}/{{ prev }}'">
            {% endif %}
            <span class="page-indicator">Page {{ page }}</span>
            {% if not last %}
            <input type="button" value="Next" class="btn btn-primary margin-left"
                        onclick="location.href='/users/log/{{ pk }}/{{ next }}'">
            {% endif %}
        </div>
    </div>
{% endblock %}
{% block other_scripts %}
    <script src="{% static 'healthnet/js/moment.min.js' %}"></script>
    <script src="{% static 'healthnet/js/transition.js' %}"></script>
    <script src="{% static 'healthnet/js/collapse.js' %}"></script>
    <script src="{% static 'healthnet/js/bootstrap-datetimepicker.min.js' %}"></script>

    <script>
        $().ready(function () {
            $('#startdate').datetimepicker({
                locale: 'en',
                format: 'MM-DD-YYYY'
            });
            $('#enddate').datetimepicker({
                locale: 'en',
                format: 'MM-DD-YYYY'
            });
        });
    </script>
{% endblock %}